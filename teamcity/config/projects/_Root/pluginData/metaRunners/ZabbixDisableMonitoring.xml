<?xml version="1.0" encoding="UTF-8"?>
<meta-runner name="Zabbix - Disable Monitoring">
  <description>Disable the Zabbix Monitoring for a Single Machine</description>
  <settings>
    <parameters>
      <param name="MACHINE_FQDN" value="" />
      <param name="ZABBIX_MAINTENANCE_GROUP" value="" />
      <param name="ZABBIX_PASSWORD" value="" />
      <param name="ZABBIX_SERVER_URL" value="" />
      <param name="ZABBIX_USERNAME" value="" />
    </parameters>
    <build-runners>
      <runner name="Download Zabbix Maintenance" type="simpleRunner">
        <parameters>
          <param name="script.content" value="curl -LO https://github.com/artberri/zabbix-maintenance-php/releases/download/v0.0.2/zabbixmaintenance.phar" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
      <runner name="Add to Maintenance" type="simpleRunner">
        <parameters>
          <param name="script.content" value="php zabbixmaintenance.phar on -U &quot;%ZABBIX_SERVER_URL%&quot; -u &quot;%ZABBIX_USERNAME%&quot; -p &quot;%ZABBIX_PASSWORD%&quot; -g &quot;%ZABBIX_MAINTENANCE_GROUP%&quot; -H &quot;%MACHINE_FQDN%&quot; -s 30" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
    </build-runners>
    <requirements />
  </settings>
</meta-runner>

